---
layout: post
title: How To Disk Dump dd
date: '2010-02-16T14:34:00.009Z'
author: Joel Bastos
tags: 
modified_time: '2013-06-05T12:56:35.111+01:00'
thumbnail: http://2.bp.blogspot.com/_iWsqNoMkfno/S3qo75LqQXI/AAAAAAAAAGE/NogdtimSGwQ/s72-c/centos-logo.png
blogger_id: tag:blogger.com,1999:blog-1780138848439428569.post-7078963697193590739
blogger_orig_url: http://blog.kintoandar.com/2010/02/how-to-disk-dump-dd.html
comments: true
---

<div class="" style="clear: both; font-family: Arial,Helvetica,sans-serif; text-align: left;">Disk Dump is nothing less than a life saviour when we're talking about disk disaster recovery or even data forensics.</div><div style="font-family: Arial,Helvetica,sans-serif;"><div class="separator" style="clear: both; text-align: center;"><a href="http://centos.org/" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" target="blank"><img border="0" src="http://2.bp.blogspot.com/_iWsqNoMkfno/S3qo75LqQXI/AAAAAAAAAGE/NogdtimSGwQ/s320/centos-logo.png" /></a></div><br /></div><div style="font-family: Arial,Helvetica,sans-serif;">Here's a quick list of cool examples for the <b>dd</b> tool:<br /><br /></div><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><span style="font-size: small;"><b>Create a backup </b></span></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=/dev/sda of=/opt/backup_sda.img</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Restore a backup </b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=/opt/backup_sda.img of=/dev/sda</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Clone a hard disk</b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=/dev/sdb of=/dev/sdc</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Transfer a disk image</b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=/dev/sdb | ssh root@target "(cat &gt;backup.img)"</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Create an iso image of a CD/DVD </b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=/dev/cdrom of=cdimage.iso</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Burn an iso image of a CD/DVD </b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=cdimage.iso of=/dev/cdrom obs=32k seek=0</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Rescue a file that contains bad blocks</b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=movie.avi of=rescued_movie.avi conv=noerror</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Create your own bootloader</b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd conv=notrunc if=bootloader of=qemu.img</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Create a backup of your MBR</b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=/dev/sdb of=mbr_backup bs=512 count=1 </blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Restore a backup of your MBR</b></li></ul></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">dd if=mbr_backup of=/dev/sdb bs=512 count=1</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>Mount dd image of and entire disk</b></li></ul><blockquote class="tr_bq">You must use the start number of the partition.</blockquote></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">fdisk -u -l disk_image </blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><blockquote class="tr_bq"><i>Disk /mnt/storage/disk_image: 0 MB, 0 bytes</i><i>255 heads, 63 sectors/track, 0 cylinders, total 0 sectors</i><i>Units = sectors of 1 * 512 = 512 bytes</i><i>Disk identifier: 0x41172ba5</i><i><br /></i><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Device Boot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Blocks&nbsp;&nbsp; Id&nbsp; System</i><i>/mnt/storage/disk_image1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 63&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64259&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32098+&nbsp; de&nbsp; Dell Utility</i><i>/mnt/storage/disk_image2&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>64260</b>&nbsp;&nbsp;&nbsp; 78108029&nbsp;&nbsp;&nbsp; 39021885&nbsp;&nbsp;&nbsp; 7&nbsp; HPFS/NTFS</i><i>Partition 2 has different physical/logical endings:</i><i>phys=(1023, 254, 63) logical=(4861, 254, 63)</i><br />Then take the start of the partition that you want to edit <b>64260</b> in this case and multiply it by 512 ie 512*<b>64260</b>=<b>32901120</b></blockquote></div><blockquote style="font-family: Arial,Helvetica,sans-serif;">mount -o loop,offset=<b>32901120</b> -t auto /mnt/storage/disk_image /mnt/drive_image</blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><ul><li><b>When the hard disk has errors</b></li></ul></div><blockquote><div style="font-family: Arial,Helvetica,sans-serif;">Get the <a href="http://www.garloff.de/kurt/linux/ddrescue/">dd_rescue</a> tool </div></blockquote><blockquote><div style="font-family: Arial,Helvetica,sans-serif;">dd_rescue /dev/sdb /opt/backup_sdb.img</div></blockquote><ul><li><b style="font-family: Arial,Helvetica,sans-serif;">Network Clone</b></li></ul><blockquote class="tr_bq"><span style="font-family: Arial, Helvetica, sans-serif;"><u>Destination:</u> nc -l -p 2222 | dd of=/dev/sda&nbsp;bs=16M</span></blockquote><blockquote class="tr_bq"><span style="font-family: Arial, Helvetica, sans-serif;"></span><span style="font-family: Arial, Helvetica, sans-serif;"><u>Origin:</u>&nbsp;dd if=/dev/sda bs=16M | nc $Destination 2222</span></blockquote><ul><li><b style="font-family: Arial, Helvetica, sans-serif;">Network speed test</b>&nbsp;</li></ul><blockquote class="tr_bq"><span style="font-family: Arial, Helvetica, sans-serif;">dd if=/dev/zero bs=1M count=100 | ssh user@machine 'cat &gt; /dev/null'</span>&nbsp;</blockquote>
